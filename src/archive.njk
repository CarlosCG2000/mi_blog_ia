---
title: "Archivo de Artículos"
layout: "layouts/base.njk"
permalink: "/archive/index.html"
---

<style>
    .post-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
    }
    .card {
        transform-style: preserve-3d;
        transition: transform 0.5s ease, opacity 0.5s ease, height 0.5s ease;
    }
    .card:hover {
        transform: translateZ(20px) rotateX(5deg) rotateY(-5deg);
    }
    /* Clase para ocultar tarjetas en la búsqueda */
    .card.filtered {
        opacity: 0;
        transform: scale(0.9);
        pointer-events: none;
        height: 0;
        margin-bottom: -2rem; /* Compensa el gap */
        overflow: hidden;
    }
    .card-content {
        transition: background-color: 0.4s ease;
    }
    .card:hover .card-content {
        background-color: #1f2937;
    }
    .card-image-wrapper {
        filter: grayscale(100%);
        transition: filter 0.4s ease;
    }
    .card:hover .card-image-wrapper {
        filter: grayscale(0%);
    }
    .card-title {
        transition: color 0.4s ease;
    }
    .card:hover .card-title {
        color: #f59e0b;
    }
</style>
<div class="px-6 md:px-12 pb-20">
    <header class="text-center mb-16">
        <h1 class="text-5xl md:text-7xl font-black uppercase tracking-tighter text-gray-200">Archivo</h1>
        <p class="text-lg text-gray-400 mt-4">Explora todos los artículos publicados hasta la fecha.</p>
    </header>
    <!-- Search Input -->
    <div class="max-w-xl mx-auto mb-12 flex gap-4">
        <input
            type="search"
            id="searchInput"
            placeholder="Buscar por título, descripción, etiqueta..."
            class="flex-grow px-5 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500
                focus:outline-none focus:ring-2 focus:ring-amber-500 transition-all">
            <input
                type="date"
                id="dateFilter"
                class="px-3 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2
                    focus:ring-amber-500 transition-all"></div>
            {% set posts = collections.post | reverse %}
            <div class="post-grid max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch" id="postsContainer">
                {% for post in posts %}
                    <article class="card h-full" data-title="{{ post.data.title | lower }}" data-description="{{ post.data.description | lower }}" data-tags="{{ post.data.tags | join(',') | lower }}">
                        <a href="{{ post.url }}" class="block h-full rounded-xl overflow-hidden shadow-2xl bg-gray-900 border border-gray-700/50 aspect-ratio-16/9">
                            <div class="card-content flex flex-col h-full">
                                <div class="card-image-wrapper aspect-video overflow-hidden">
                                    <img src="{{ post.data.image or 'https://images.unsplash.com/photo-1555066931-4365d1469c9b?q=80&w=870&auto-format&fit=crop' }}" alt="Imagen para {{ post.data.title }}" class="w-full h-full object-cover transition-transform duration-400 ease-in-out transform group-hover:scale-105"></div>
                                    <div class="p-8 flex-grow flex flex-col">
                                        <h2 class="card-title text-2xl font-bold text-gray-100 mb-3 flex-grow">{{ post.data.title }}</h2>
                                        {% if post.data.date %}
                                            <p class="text-xs text-amber-500 font-semibold tracking-wider uppercase">
                                                <time datetime="{{ post.date | date('iso') }}">{{ post.date | date }}</time>
                                            </p>
                                        {% endif %}
                                    </div>
                                </div>
                            </a>
                        </article>
                    {% endfor %}
                </div>
                <p id="noResults" class="text-center text-gray-500 mt-12 hidden">No se encontraron artículos que coincidan con tu
                    búsqueda.</p>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const searchInput = document.getElementById('searchInput');
                    const dateFilter = document.getElementById('dateFilter');
                    const postsContainer = document.getElementById('postsContainer');
                    const allPosts = Array.from(postsContainer.getElementsByClassName('card'));
                    const noResults = document.getElementById('noResults');
                    function applyFilters() {
                        const searchTerm = (searchInput ?. value || '').toLowerCase().trim();
                        const selectedDate = (dateFilter ?. value || '').trim(); // formato YYYY-MM-DD
                        let visiblePosts = 0;
                        allPosts.forEach(post => {
                            const title = post.dataset.title || '';
                            const description = post.dataset.description || '';
                            const tags = post.dataset.tags || '';
                            const postDateRaw = post.querySelector('time') ?. getAttribute('datetime') || '';
                            // Normalizar la fecha (coge solo YYYY-MM-DD, por si lleva hora)
                            const postDate = postDateRaw.split('T')[0];
                            const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm) || tags.includes(searchTerm);
                            const matchesDate = ! selectedDate || postDate === selectedDate;
                            if (matchesSearch && matchesDate) {
                                post.classList.remove('filtered');
                                visiblePosts++;
                            } else {
                                post.classList.add('filtered');
                            }
                        });
                        noResults.classList.toggle('hidden', visiblePosts > 0);
                    }
                    searchInput ?. addEventListener('keyup', applyFilters);
                    dateFilter ?. addEventListener('change', applyFilters);
                });
            </script>